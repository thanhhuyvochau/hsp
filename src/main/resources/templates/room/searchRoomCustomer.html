<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

</html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,shrink-to-fit=no">
	<title>Tìm phòng</title>

	<!-- FAVICON -->
	<link rel="icon" type="image/png" href="">

	<!-- Bootstrap5 CND Links -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
	<!-- Link Swiper's CSS -->
	<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">

	<!-- Custom File's Link -->
	<link rel="stylesheet" href="/assets/css/header-footer.css">
	<link rel="stylesheet" href="/assets/css/header-footer-style.css">
	<link rel="stylesheet" href="/assets/css/searchRoomCustomer.css">
	<link rel="stylesheet" href="/assets/css/homepage.css">
	<link rel="stylesheet" href="/assets/css/flaticon.css">

	<link href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,600,700&display=swap" rel="stylesheet">

</head>

<body data-bs-target=".navbar" data-bs-offset="100">
	<header th:replace="~{header :: header}">

	</header>

	<div class="site-blocks-cover overlay" style="background-image: url(assets/img/news/background2.jpg);"
		data-aos="fade" data-stellar-background-ratio="0.5">
		<div class="container">
			<div class="row align-items-center justify-content-center">
				<div class="col-md-7 text-center" data-aos="fade">
					<h1 class="mb-4">Tìm Phòng</h1>
				</div>
			</div>
		</div>
	</div>
	<!-- <div class="container booking-area" th:replace="~{searchRoom :: searchRoom}">

	</div>
-->

	<div class="container booking-area" th:fragment="searchRoom">
		<form class="row" th:action="@{/room/search}" method="Get">
			<div class="col-lg mb-3 ">
				<h6>Ngày nhận phòng</h6>
				<input type="date" name="checkIn" class="form-control" placeholder="Date" id="checkInDate"
					th:value="${session.defaultDate}" required>
			</div>
			<div class="col-lg mb-3 ">
				<h6>Ngày trả phòng</h6>
				<input type="date" name="checkOut" class="form-control" placeholder="Date" id="checkOutDate"
					th:value="${session.defaultDate1}" required>
			</div>
			<div class="col-lg mb-3">
				<h6>Số người</h6>
				<select name="numberOfPeople" class="form-select">
					<option selected value="">-----</option>
					<option value="1" th:selected="${session.numberOfPeople == 1}">1</option>
					<option value="2" th:selected="${session.numberOfPeople == 2}">2</option>
					<option value="3" th:selected="${session.numberOfPeople == 3}">3</option>
					<option value="4" th:selected="${session.numberOfPeople == 4}">4</option>
					<option value="5" th:selected="${session.numberOfPeople == 5}">5</option>
				</select>
			</div>
			<div class="col-lg mb-3">
				<h6></h6>
				<button type="submit" class="main-btn rounded-2 px-lg-3 mt-3">Tìm Phòng</button>
			</div>
		</form>


	</div>

	<div class="row">
		<div class="col ps-5">
			<section class="room-section spad">
				<div class="container">
					<div class="rooms-page-item" th:each="addedCategories : ${conflictingBookings.getRoomCategories()}">

						<div class="row">
							<div class="col-lg-6">
								<div class="room-pic-slider owl-carousel">
									<div class="single-room-pic">
										<img src="/assets/img/rooms/rooms-1.jpg" alt="">
									</div>
								</div>
							</div>
							<div class="col-lg-6">
								<div class="room-text">
									<div class="room-title">
										<h2 th:text="${addedCategories.getRoomCategoryName()}"></h2>
									</div>
									<div class="room-desc">
										<p th:text="${addedCategories.getDescription()}"></p>
									</div>
									<div class="room-features">
										<div class="room-info">
											<i class="flaticon-019-television"></i>
											<span>TV</span>
										</div>
										<div class="room-info">
											<i class="flaticon-029-wifi"></i>
											<span>Wi-Fi</span>
										</div>
										<div class="room-info">
											<i class="flaticon-003-air-conditioner"></i>
											<span>Điều hòa</span>
										</div>
										<div class="room-info">
											<i class="flaticon-036-parking"></i>
											<span>Chỗ để xe</span>
										</div>
										<div class="room-info last">
											<i class="flaticon-007-swimming-pool"></i>
											<span>Bể bơi</span>
										</div>
									</div>
									<div class="room-features">
										<div class="room-info">
											<span></span>
										</div>
										<div class="room-info">
											<span
												th:text="${'Kích thước phòng:' +addedCategories.getSquare()+' m2'}"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<hr>
						<div class="row">
							<div class="col-lg-3">
								<div class="room-text">
									<div class="room-title">
										<h4 th:text="${addedCategories.getRoomCategoryName()}"></h4>
										<div class="room-desc2">
											<p>ƯU ĐÃI KHÁCH SẠN</p>
											<p>Hủy phòng linh hoạt</p>
											<p>Bao gồm bữa sáng</p>
										</div>
									</div>
								</div>
							</div>
							<div class="col-lg-3">
								<p class="bi bi-person-fill" style="font-size: large;"
									th:text="${addedCategories.getNumberPerson()}"></p>
							</div>
							<div class="col-lg-3">
								<div class="room-text">
									<div class="room-title">
										<div class="flex-container"
											th:each="crp : ${conflictingBookings.getCategoryRoomPrices()}">
											<div
												th:if="${crp.getRoomCategoryId() == addedCategories.getRoomCategoryId()}">
												<p>Từ
												<h2
													th:text="${#numbers.formatDecimal(crp.getPrice(), 0, 'COMMA', 0, 'POINT') + ' VND'}">
												</h2>
												<sub>/đêm</sub> </p>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="col-lg-3">
								<select class="form-select w-75" id="roomSelect" onchange="updateSelectedRooms()">
									<th:block th:each="entry : ${conflictingBookings.getTotalRoom()}">
										<th:block th:if="${entry.getKey() == addedCategories.roomCategoryId}">
											<th:with th:with="rroomCount = ${#lists.size(entry.value)}">
												<!-- Hiển thị số phòng -->
												<p th:text="'Total Rooms: ' + ${rroomCount}"></p>
												<option th:each="i : ${#numbers.sequence(0, rroomCount)}"
													th:value="${i}" th:utext="${i}"></option>
											</th:with>
										</th:block>
									</th:block>
								</select>

								<br>
								<button onclick="showCal()" class="main-btn" style="font-size:15px">Lịch giá phòng <i
										class="fa fa-calendar"></i></button>
							</div>
						</div>
					<div class="row">
						<div class="col-lg-3">
							<div class="room-text">
								<div class="room-title">
									<div class="room-desc2">
									<p>Giá phòng ngày thường:<a>1,000,000 VND</a></p>
									<p>Giá phòng ngày cuối tuần:<a class="text-warning">1,500,000 VND</a></p>
									<p>Giá phòng ngày lễ:<a class="text-danger">3,000,000 VND</a></p>
									</div>
								</div>
							</div>
						</div>
					</div>

						<div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
							<div class="carousel-inner">
								<div class="carousel-item" th:each="page,iterStat : ${carouselPages}"
									th:classappend="${iterStat.index == 0} ? 'active'">
									<div class="row">
										<div class="col" th:each="dateInfo : ${page}">
											<div class="calendar-price" th:if="${dateInfo.getDayType() == 1}">
												<p class="ps-2" th:text="${dateInfo.getDate()}"></p>
												<div th:each="crp : ${conflictingBookings.getCategoryRoomPrices()}">
													<div
														th:if="${crp.getRoomCategoryId() == addedCategories.getRoomCategoryId()}">
														<p id="pricePerNight"
															th:text="${#numbers.formatDecimal(crp.getPrice(), 0, 'COMMA', 0, 'POINT') + ' VND'}">
														</p>
													</div>
												</div>
											</div>

											<div class="calendar-price" th:if="${dateInfo.getDayType() == 2}">
												<p class="ps-2" th:text="${dateInfo.getDate()}"></p>
												<div th:each="crp : ${conflictingBookings.getCategoryRoomPrices()}">
													<div
														th:if="${crp.getRoomCategoryId() == addedCategories.getRoomCategoryId()}">
														<p id="pricePerNight" class="text-warning"
															th:text="${#numbers.formatDecimal(crp.getPrice() * 1.5, 0, 'COMMA', 0, 'POINT') + ' VND'}">
														</p>
														<p class="text-decoration-line-through"
															th:text="${#numbers.formatDecimal(crp.getPrice(), 0, 'COMMA', 0, 'POINT') + ' VND'}">
														</p>
													</div>
												</div>
											</div>
											<div class="calendar-price" th:if="${dateInfo.getDayType() == 3}">
												<p class="ps-2" th:text="${dateInfo.getDate()}"></p>
												<div th:each="crp : ${conflictingBookings.getCategoryRoomPrices()}">
													<div
														th:if="${crp.getRoomCategoryId() == addedCategories.getRoomCategoryId()}">
														<p id="pricePerNight" class="text-danger"
															th:text="${#numbers.formatDecimal(crp.getPrice() * 3, 0, 'COMMA', 0, 'POINT') + ' VND'}">
														</p>
														<p class="text-decoration-line-through"
															th:text="${#numbers.formatDecimal(crp.getPrice(), 0, 'COMMA', 0, 'POINT') + ' VND'}">
														</p>

													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<button class="carousel-control-prev d-flex justify-content-start" type="button"
								data-bs-target="#carouselExampleControls" data-bs-slide="prev">
								<span class="m-0 carousel-control-prev-icon" aria-hidden="true"></span>
								<span class="visually-hidden">Previous</span>
							</button>
							<button class="carousel-control-next d-flex justify-content-end" type="button"
								data-bs-target="#carouselExampleControls" data-bs-slide="next">
								<span class="m-0 carousel-control-next-icon" aria-hidden="true"></span>
								<span class="visually-hidden">Next</span>
							</button>
						</div>
					</div>
				</div>
			</section>
		</div>

		<div class="col-lg-3 ps-5">
			<section class="room-section spad sticky-section">
				<a href="#" class="main-btn mt-2">Đặt ngay</a>
				<div class="book-btn">
					<p id="selectedRooms">0 phòng</p>
					<p id="priceDisplay" class="price-btn">0VND</p>
					<p id="selectedNights">cho 0 đêm</p>
				</div>
			</section>
		</div>
	</div>



	<section th:replace="~{footer :: footer}"></section>

	<!-- Bootstrap 5 JS CDN Links -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.0/js/bootstrap.min.js"></script>
	<script src="https://kit.fontawesome.com/032d11eac3.js" crossorigin="anonymous"></script>

	<!-- Swiper JS -->
	<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

	<!-- Custom Js Link -->
	<script src="/assets/js/main.js"></script>
	<script src="/assets/js/aos.js"></script>
	<!--<script src="/assets/js/searchRoom.js"></script>-->
</body>